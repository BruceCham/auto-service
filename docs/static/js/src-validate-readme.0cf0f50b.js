(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/validate/README.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("./node_modules/react/index.js"),r=n("./node_modules/@mdx-js/react/dist/esm.js"),b=n("./node_modules/docz/dist/index.esm.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),d=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n)}(o.Component);"undefined"!==typeof d&&d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IProxyHandleConfig",filename:"__tests__/Validate.tsx"}});var p=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n)}(o.Component);"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMValidateInfo",filename:"__tests__/Validate.tsx"}});var u=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n)}(o.Component);"undefined"!==typeof u&&u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMAjaxConfig",filename:"__tests__/Validate.tsx"}});var m=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n)}(o.Component);"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMAbstractResponse",filename:"__tests__/Validate.tsx"}});var j=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n)}(o.Component);"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IIncomingMessage",filename:"__tests__/Validate.tsx"}});var O=["components"],f={};function x(e){var t=e.components,n=Object(a.a)(e,O);return Object(r.b)("wrapper",Object.assign({},f,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"autos-\u6570\u636e\u6821\u9a8c\u4e2d\u95f4\u4ef6"},"Autos \u6570\u636e\u6821\u9a8c\u4e2d\u95f4\u4ef6"),Object(r.b)("p",null,"Autos \u5185\u7f6e\u4e86\u5bf9\u63a5\u53e3\u8c03\u7528\u524d\u7aef\u4f20\u53c2\u3001\u540e\u7aef\u6570\u636e\u8fd4\u56de\u662f\u5426\u7b26\u5408\u63a5\u53e3\u6587\u6863\u7ea6\u5b9a\u7684\u6821\u9a8c\u529f\u80fd\uff0c\u53ef\u901a\u8fc7 http-proxy-middleware \u4e2d\u95f4\u4ef6\u7684\u5f62\u5f0f\u4f7f\u7528\u3002"),Object(r.b)("h2",{id:"11-\u7279\u6027"},"1.1 \u7279\u6027"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u6821\u9a8c query, path, postJSON, post form \u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(r.b)("li",{parentName:"ul"},"\u6821\u9a8c response json \u662f\u5426\u7b26\u5408\u7ea6\u5b9a")),Object(r.b)("h2",{id:"12-todo"},"1.2 TODO"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c websocket \u8bf7\u6c42\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(r.b)("li",{parentName:"ul"},"\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c\u6587\u4ef6\u4e0a\u4f20\u8bf7\u6c42\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(r.b)("li",{parentName:"ul"},"\u53ef\u80fd\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c headers \u5185\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(r.b)("li",{parentName:"ul"},"\u672a\u6821\u9a8c\u975e json \u54cd\u5e94\u6570\u636e\u683c\u5f0f\u662f\u5426\u7b26\u5408\u7ea6\u5b9a")),Object(r.b)("h2",{id:"2-api"},"2. API"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-tsx"},"const { createProxyMiddleware } = require('http-proxy-middleware');\nconst { proxyHandle } = require('auto-service/lib/validate');\n\nproxyHandle(proxies: proxyConfig || proxyConfig[], config: IProxyHandleConfig)\n")),Object(r.b)("h2",{id:"21-iproxyhandleconfig"},"2.1 IProxyHandleConfig"),Object(r.b)("p",null,"IProxyHandleConfig \u7528\u4ee5\u914d\u7f6e\u6821\u9a8c\u4e2d\u95f4\u4ef6\u7684\u76f8\u5173\u884c\u4e3a\u3002"),Object(r.b)(b.c,{of:d,mdxType:"Props"}),Object(r.b)("h2",{id:"22-ismvalidateinfo"},"2.2 ISMValidateInfo"),Object(r.b)(b.c,{of:p,mdxType:"Props"}),Object(r.b)("h2",{id:"23-ismajaxconfig"},"2.3 ISMAjaxConfig"),Object(r.b)(b.c,{of:u,mdxType:"Props"}),Object(r.b)("h2",{id:"24-ismabstractresponse"},"2.4 ISMAbstractResponse"),Object(r.b)(b.c,{of:m,mdxType:"Props"}),Object(r.b)("h2",{id:"25-iincomingmessage"},"2.5 IIncomingMessage"),Object(r.b)(b.c,{of:j,mdxType:"Props"}),Object(r.b)("h2",{id:"3-\u5feb\u901f\u4e0a\u624b---\u9762\u5411\u524d\u7aef-fe"},"3 \u5feb\u901f\u4e0a\u624b - \u9762\u5411\u524d\u7aef FE"),Object(r.b)("p",null,"\u9002\u7528\u4e8e\u524d\u540e\u7aef\u8054\u8c03\u9636\u6bb5\uff0c\u63d0\u5347\u8054\u8c03\u6548\u7387\u3002"),Object(r.b)("h2",{id:"31-\u914d\u7f6e-proxy"},"3.1 \u914d\u7f6e proxy"),Object(r.b)("p",null,"\u914d\u7f6e webpack proxy\uff0c\u5982 cra \u6807\u914d\u7684 src/setupProxy.js\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"const { createProxyMiddleware } = require('http-proxy-middleware');\n/**\n * @typedef { import('auto-service/lib/consts').ProxyHandleConfig } ProxyHandleConfig\n */\nconst { proxyHandle } = require('auto-service/lib/validate');\n\nmodule.exports = function (app) {\n  app.use(\n    '/test/api',\n    createProxyMiddleware({\n      ...proxyHandle(\n        {},\n        /** @type {ProxyHandleConfig} \u914d\u7f6e */\n        {\n          // \u52a0\u8f7d\u672c\u5730 swagger \u6587\u6863\u7684\u903b\u8f91\n          loadSwagger: () => require('../swagger.json'),\n          // \u8fd4\u56de\u63a5\u53e3\u8fd4\u56de\u7684 result \u5b57\u6bb5\n          formatBodyBeforeValidate: (data) => data.result,\n          // \u81ea\u5b9a\u4e49\u6821\u9a8c\u4fe1\u606f\u663e\u793a\u903b\u8f91\n          onValidate: (res) => {\n            const { code, result: { receive, send } = {}, message } = res;\n            if (code) {\n              // do something\n            }\n          }\n      )[0],\n      target: PROXY_TARGET,\n      changeOrigin: true\n    })\n  )\n};\n")),Object(r.b)("h2",{id:"32-\u9ed8\u8ba4-onvalidate"},"3.2 \u9ed8\u8ba4 onValidate"),Object(r.b)("p",null,"\u5f53\u4f20\u53c2\u6216\u6570\u636e\u8fd4\u56de\u4e0d\u7b26\u5408\u6587\u6863\u7ea6\u5b9a\u65f6\uff0c\u9ed8\u8ba4 onValidate \u914d\u7f6e\u4f1a\u6253\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"  \u63a5\u53e3 /mix/{id}/ \u53c2\u6570\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.body.id should be number\n  \u63a5\u53e3 /mix/{id}/ \u6570\u636e\u8fd4\u56de\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.code should be number\n  \u63a5\u53e3 /mix/{id}/ \u53c2\u6570\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.body.id should be number\n  \u63a5\u53e3 /mix/{id}/ \u6570\u636e\u8fd4\u56de\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.code should be number\n")),Object(r.b)("p",null,"\u4f60\u53ef\u4ee5\u914d\u7f6e\u5728 onValidate \u5185\u914d\u7f6e\u4efb\u610f\u7684\u5904\u7406\u903b\u8f91\uff0c\u4f8b\u5982\u5411\u4e0e\u4f60\u8054\u8c03\u7684 RD \u53d1\u9001 IM \u6d88\u606f\u3002"),Object(r.b)("h2",{id:"4-\u5feb\u901f\u4e0a\u624b---\u9762\u5411\u6d4b\u8bd5-qa"},"4. \u5feb\u901f\u4e0a\u624b - \u9762\u5411\u6d4b\u8bd5 QA"),Object(r.b)("p",null,"TODO"),Object(r.b)("p",null,"\u81ea\u52a8\u6d4b\u8bd5\u5e76\u6821\u9a8c"))}x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/validate/README.mdx"}}),x.isMDXComponent=!0}}]);
//# sourceMappingURL=src-validate-readme.979a0aa450ac0d51d6ab.js.map