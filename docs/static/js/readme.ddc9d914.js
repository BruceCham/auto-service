(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./README.mdx":function(e,n,t){"use strict";t.r(n);var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=t("./node_modules/react/index.js"),r=t("./node_modules/@mdx-js/react/dist/esm.js"),i=t("./node_modules/docz/dist/index.esm.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),b=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),p=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IGuardConfig",filename:"__tests__/Doc.tsx"}});var u=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof u&&u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IYAPIConfig",filename:"__tests__/Doc.tsx"}});var m=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISwaggerParser",filename:"__tests__/Doc.tsx"}});var j=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IJson2Service",filename:"__tests__/Doc.tsx"}});var d=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof d&&d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IRequest",filename:"__tests__/Doc.tsx"}});var O=function(e){function n(){return Object(o.a)(this,n),Object(b.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(c.a)(n,e),n}(s.Component);"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISwaggerConfig",filename:"__tests__/Doc.tsx"}}),t.d(n,"default",(function(){return h}));var f={},g="wrapper";function h(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)(g,Object.assign({},f,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"npm-i--d-sm2tsservice"},Object(r.b)("inlineCode",{parentName:"h1"},"npm i -D sm2tsservice")),Object(r.b)("p",null,"\u6839\u636e swagger \u6216\u8005 yapi mock json \u751f\u6210 typescript service \u4ee3\u7801"),Object(r.b)("hr",null),Object(r.b)("h2",{id:"1-cli"},"1. CLI"),Object(r.b)("h2",{id:"11-\u914d\u7f6e\u6587\u4ef6"},"1.1 \u914d\u7f6e\u6587\u4ef6"),Object(r.b)("p",null,"edit ",Object(r.b)("inlineCode",{parentName:"p"},"json2service.json"),"\uff0c\u4e5f\u53ef\u7528 ",Object(r.b)("inlineCode",{parentName:"p"},"xxx.js"),"\uff0c\u7136\u540e\u914d\u7f6e ",Object(r.b)("inlineCode",{parentName:"p"},"-c xxx.js")),Object(r.b)("h2",{id:"111-cli-\u914d\u7f6e"},"1.1.1 CLI \u914d\u7f6e"),Object(r.b)(i.c,{of:j,mdxType:"Props"}),Object(r.b)("h2",{id:"112-swaggerparser"},"1.1.2 ",Object(r.b)("inlineCode",{parentName:"h2"},"swaggerParser")),Object(r.b)(i.c,{of:m,mdxType:"Props"}),Object(r.b)("h2",{id:"113-guardconfig"},"1.1.3 ",Object(r.b)("inlineCode",{parentName:"h2"},"guardConfig")),Object(r.b)(i.c,{of:p,mdxType:"Props"}),Object(r.b)("h2",{id:"124-yapiconfig"},"1.2.4 ",Object(r.b)("inlineCode",{parentName:"h2"},"yapiConfig")),Object(r.b)(i.c,{of:u,mdxType:"Props"}),Object(r.b)("h2",{id:"124-requestconfig"},"1.2.4 ",Object(r.b)("inlineCode",{parentName:"h2"},"requestConfig")),Object(r.b)(i.c,{of:d,mdxType:"Props"}),Object(r.b)("h2",{id:"125-swaggerconfig"},"1.2.5 ",Object(r.b)("inlineCode",{parentName:"h2"},"swaggerConfig")),Object(r.b)(i.c,{of:O,mdxType:"Props"}),Object(r.b)("h2",{id:"12-example"},"1.2 Example"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'{\n  "url": "./api.json", // \u6587\u4ef6\u8def\u5f84\n  "remoteUrl": "http://**", // url\n  "requestConfig": {\n    "url": "./api.json" // \u6587\u4ef6\u8def\u5f84\u6216url\n    // \u4ee5\u4e0b\u6240\u6709 request \u652f\u6301\u7684\u53c2\u6570\n    // headers?: Headers;\n    // baseUrl?: string;\n    // callback?: RequestCallback;\n    // jar?: CookieJar | boolean;\n    // formData?: { [key: string]: any };\n    // form?: { [key: string]: any } | string;\n    // auth?: AuthOptions;\n    // oauth?: OAuthOptions;\n    // aws?: AWSOptions;\n    // hawk?: HawkOptions;\n    // qs?: any;\n    // qsStringifyOptions?: any;\n    // qsParseOptions?: any;\n    // json?: any;\n    // jsonReviver?: (key: string, value: any) => any;\n    // jsonReplacer?: (key: string, value: any) => any;\n    // multipart?: RequestPart[] | Multipart;\n    // agent?: http.Agent | https.Agent;\n    // agentOptions?: http.AgentOptions | https.AgentOptions;\n    // agentClass?: any;\n    // forever?: any;\n    // host?: string;\n    // port?: number;\n    // method?: string;\n    // body?: any;\n    // family?: 4 | 6;\n    // followRedirect?: boolean | ((response: http.IncomingMessage) => boolean);\n    // followAllRedirects?: boolean;\n    // followOriginalHttpMethod?: boolean;\n    // maxRedirects?: number;\n    // removeRefererHeader?: boolean;\n    // encoding?: string | null;\n    // pool?: any;\n    // timeout?: number;\n    // localAddress?: string;\n    // proxy?: any;\n    // tunnel?: boolean;\n    // strictSSL?: boolean;\n    // rejectUnauthorized?: boolean;\n    // time?: boolean;\n    // gzip?: boolean;\n    // preambleCRLF?: boolean;\n    // postambleCRLF?: boolean;\n    // withCredentials?: boolean;\n    // key?: Buffer;\n    // cert?: Buffer;\n    // passphrase?: string;\n    // ca?: string | Buffer | string[] | Buffer[];\n    // har?: HttpArchiveRequest;\n    // useQuerystring?: boolean;\n  },\n  "type": "yapi",\n  "yapiConfig": {\n    "required": false,\n    "bodyJsonRequired": false,\n    "categoryMap": {\n      "\u4e2d\u6587": "English" // yapi \u63a5\u53e3\u5206\u7c7b\u4e2d\u82f1\u6587\u6620\u5c04\n    }\n  },\n  "swaggerParser": {\n    "-o": "tmp/services"\n  },\n  "validateResponse": false, // \u662f\u5426\u751f\u6210\u6821\u9a8c\u903b\u8f91\n  "guardConfig": {\n    // + strict \u4e25\u683c\u6a21\u5f0f\n    //    - \u6821\u9a8c swagger tags\u3010yapi \u63a5\u53e3\u5206\u7c7b\u3011\u662f\u5426\u662f\u7eaf\u82f1\u6587\n    //    - \u65b9\u6cd5\u540d\u4f7f\u7528 http method + url \u9a7c\u5cf0\u5f62\u5f0f\n    //    - \u65b0\u9879\u76ee\u91c7\u7528\n    // + safe \u5b89\u5168\u6a21\u5f0f\n    //    - \u65b9\u6cd5\u540d\u4f7f\u7528 http method + url \u9a7c\u5cf0\u5f62\u5f0f\n    //    - \u8001\u9879\u76ee\u5347\u7ea7\uff0c\u4e0d\u4f1a\u6821\u9a8c tags\uff0c\u4f1a\u751f\u6210\u65b9\u6cd5\u8c03\u7528\u66ff\u6362\u6620\u5c04\u8868\n    // + \u9ed8\u8ba4\n    //    - http method + url => operationId \u6620\u5c04\u9501\u5b9a\n    //    - \u8001\u9879\u76ee\u7ef4\u6301\u73b0\u72b6\n    "mode": "strict",\n    // swagger \u5904\u7406\u91cd\u590d operationId \u903b\u8f91\u6709\u98ce\u9669\uff0c\u56e0\u6b64\u9700\u8981\u9501\u5b9a\u6620\u5c04\u5173\u7cfb\n    "methodUrl2OperationIdMap": {\n      "get /api/xxx/xxx": "operationId"\n    }\n  }\n}\n')),Object(r.b)("h2",{id:"13-\u751f\u6210-service-\u4ee3\u7801"},"1.3 \u751f\u6210 service \u4ee3\u7801"),Object(r.b)("h3",{id:"\u547d\u4ee4\u884c"},"\u547d\u4ee4\u884c"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"  ./node_modules/.bin/sm2tsservice # \u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\n  ./node_modules/.bin/sm2tsservice -c config.json # \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\n  ./node_modules/.bin/sm2tsservice --clear # \u6e05\u7a7a\u4e0a\u6b21\u751f\u6210\u4ea7\u7269\n  ./node_modules/.bin/sm2tsservice --quiet # \u81ea\u52a8\u5168\u91cf\u4f7f\u7528\u8fdc\u7a0b\u6587\u6863\uff0c\u4e0d\u663e\u793a diff & merge \u9875\u9762\n  ./node_modules/.bin/sm2tsservice --models # \u4ec5\u751f\u6210 models\n  ./node_modules/.bin/sm2tsservice --models --apis # \u4ec5\u751f\u6210 models & apis\n  ./node_modules/.bin/sm2tsservice --typeScriptDataFile TypeSciptData.json # \u4ec5\u751f\u6210\u7c7b\u578b\u4fe1\u606f json \u5230 TypeSciptData.json\n")),Object(r.b)("h3",{id:"npm-run"},"npm run"),Object(r.b)("p",null,"\u5199\u5165 ",Object(r.b)("inlineCode",{parentName:"p"},"package.json"),"\uff0c\u901a\u8fc7 ",Object(r.b)("inlineCode",{parentName:"p"},"npm run api")," \u4f7f\u7528"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'{\n  "scripts": {\n    "api": "sm2tsservice --clear"\n  }\n}\n')),Object(r.b)("h2",{id:"2-ajax-\u63a5\u53e3"},"2. ajax \u63a5\u53e3"),Object(r.b)("p",null,"\u5b9e\u73b0 ajax \u7c7b\u3010\u5982\u679c\u4f7f\u7528\u7684 axios\uff0c\u4e14\u540e\u7aef\u8fd4\u56de\u6570\u636e\u7ed3\u6784\u9075\u5faa ",Object(r.b)("inlineCode",{parentName:"p"},"{ code?:number;message?:string;result: any }"),"\u3011"),Object(r.b)("p",null,Object(r.b)("a",Object.assign({parentName:"p"},{href:"https://www.npmjs.com/package/tkit-ajax"}),"\u8be6\u60c5 tkit-ajax")),Object(r.b)("h2",{id:"3-\u589e\u91cf\u66f4\u65b0"},"3. \u589e\u91cf\u66f4\u65b0"),Object(r.b)("p",null,"\u81ea @3.1.","*"," \u7248\u672c\u8d77\uff0c\u652f\u6301\u589e\u91cf\u66f4\u65b0"),Object(r.b)("h3",{id:"\u6d41\u7a0b"},"\u6d41\u7a0b"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u914d\u7f6e\u6587\u4ef6\u53d8\u66f4",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"url - \u5fc5\u987b\u6307\u5411\u672c\u5730 swagger \u6587\u4ef6\u3010\u5982\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5728\u83b7\u53d6 remoteUrl \u6307\u5b9a\u5730\u5740\u5185\u5bb9\u540e\uff0c\u521b\u5efa\u8be5\u6587\u4ef6"),Object(r.b)("li",{parentName:"ul"},"remoteUrl - url \u5730\u5740\uff0c\u5373\u4e4b\u524d\u7684 url"))),Object(r.b)("li",{parentName:"ul"},"\u6267\u884c CLI \u751f\u6210\u4ee3\u7801"),Object(r.b)("li",{parentName:"ul"},"CLI \u5bf9\u672c\u5730 swagger \u6587\u4ef6\u548c\u8fdc\u7a0b swagger \u6587\u4ef6\u8fdb\u884c DIFF",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\u6709\u5dee\u5f02",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u4eba\u5de5\u9009\u62e9\u9700\u8981\u540c\u6b65\u7684\u5dee\u5f02\uff0c\u70b9\u4fdd\u5b58"),Object(r.b)("li",{parentName:"ul"},"CLI patch delta"))),Object(r.b)("li",{parentName:"ul"},"\u65e0\u5dee\u5f02",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\u76f4\u63a5\u4e0b\u4e00\u6b65"))))),Object(r.b)("li",{parentName:"ul"},"CLI \u751f\u6210 service \u4ee3\u7801")))}h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"README.mdx"}}),h.isMDXComponent=!0}}]);
//# sourceMappingURL=readme.671ae04d99a347c0027d.js.map