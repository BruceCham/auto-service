(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./src/validate/README.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("./node_modules/react/index.js"),s=n("./node_modules/@mdx-js/react/dist/esm.js"),i=n("./node_modules/docz/dist/index.esm.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),b=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),d=function(e){function t(){return Object(r.a)(this,t),Object(b.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(o.Component);"undefined"!==typeof d&&d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IProxyHandleConfig",filename:"__tests__/Validate.tsx"}});var p=function(e){function t(){return Object(r.a)(this,t),Object(b.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(o.Component);"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMValidateInfo",filename:"__tests__/Validate.tsx"}});var u=function(e){function t(){return Object(r.a)(this,t),Object(b.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(o.Component);"undefined"!==typeof u&&u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMAjaxConfig",filename:"__tests__/Validate.tsx"}});var m=function(e){function t(){return Object(r.a)(this,t),Object(b.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(o.Component);"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISMAbstractResponse",filename:"__tests__/Validate.tsx"}});var j=function(e){function t(){return Object(r.a)(this,t),Object(b.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(o.Component);"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IIncomingMessage",filename:"__tests__/Validate.tsx"}}),n.d(t,"default",(function(){return x}));var O={},f="wrapper";function x(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)(f,Object.assign({},O,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"service-\u53cc\u5411\u6821\u9a8c\u4e2d\u95f4\u4ef6"},"service \u53cc\u5411\u6821\u9a8c\u4e2d\u95f4\u4ef6"),Object(s.b)("h2",{id:"1-\u7248\u672c\u652f\u6301"},"1. \u7248\u672c\u652f\u6301"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"  3.4.0+\n")),Object(s.b)("h2",{id:"11-feat"},"1.1 feat"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"\u6821\u9a8c query, path, postJSON, post form \u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(s.b)("li",{parentName:"ul"},"\u6821\u9a8c response json \u662f\u5426\u7b26\u5408\u7ea6\u5b9a")),Object(s.b)("h2",{id:"12-todo"},"1.2 todo"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c websocket \u8bf7\u6c42\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(s.b)("li",{parentName:"ul"},"\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c\u6587\u4ef6\u4e0a\u4f20\u8bf7\u6c42\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(s.b)("li",{parentName:"ul"},"\u53ef\u80fd\u4e0d\u80fd\u6b63\u786e\u6821\u9a8c headers \u5185\u53c2\u6570\u662f\u5426\u7b26\u5408\u7ea6\u5b9a"),Object(s.b)("li",{parentName:"ul"},"\u672a\u6821\u9a8c\u975e json \u54cd\u5e94\u6570\u636e\u683c\u5f0f\u662f\u5426\u7b26\u5408\u7ea6\u5b9a")),Object(s.b)("h2",{id:"2-api"},"2. API"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"const { createProxyMiddleware } = require('http-proxy-middleware');\nconst { proxyHandle } = require('sm2tsservice/lib/validate');\n\nproxyHandle(proxies: proxyConfig || proxyConfig[], config: IProxyHandleConfig)\n")),Object(s.b)("h2",{id:"21-iproxyhandleconfig"},"2.1 IProxyHandleConfig"),Object(s.b)(i.c,{of:d,mdxType:"Props"}),Object(s.b)("h2",{id:"22-ismvalidateinfo"},"2.2 ISMValidateInfo"),Object(s.b)(i.c,{of:p,mdxType:"Props"}),Object(s.b)("h2",{id:"23-ismajaxconfig"},"2.3 ISMAjaxConfig"),Object(s.b)(i.c,{of:u,mdxType:"Props"}),Object(s.b)("h2",{id:"24-ismabstractresponse"},"2.4 ISMAbstractResponse"),Object(s.b)(i.c,{of:m,mdxType:"Props"}),Object(s.b)("h2",{id:"25-ismvalidateinfo"},"2.5 ISMValidateInfo"),Object(s.b)(i.c,{of:j,mdxType:"Props"}),Object(s.b)("h2",{id:"3-\u9762\u5411-fe"},"3 \u9762\u5411 FE"),Object(s.b)("p",null,"\u9762\u5411 FE & RD \u524d\u540e\u7aef\u8054\u8c03\u9636\u6bb5"),Object(s.b)("h2",{id:"31-\u914d\u7f6e-proxy"},"3.1 \u914d\u7f6e proxy"),Object(s.b)("p",null,"\u7f16\u8f91 webpack proxy \u914d\u7f6e\uff0c\u793a\u4f8b\uff1asrc/setupProxy.js"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"const { createProxyMiddleware } = require('http-proxy-middleware');\n/**\n * @typedef { import('sm2tsservice/lib/consts').ProxyHandleConfig } ProxyHandleConfig\n */\nconst { proxyHandle } = require('sm2tsservice/lib/validate');\n\nmodule.exports = function (app) {\n  app.use(\n    '/test/api',\n    createProxyMiddleware({\n      ...proxyHandle(\n        {},\n        /** @type {ProxyHandleConfig} \u914d\u7f6e */\n        {\n          // \u52a0\u8f7d\u672c\u5730 swagger \u6587\u6863\u7684\u903b\u8f91\n          loadSwagger: () => require('../swagger.json'),\n          // \u8fd4\u56de\u63a5\u53e3\u8fd4\u56de\u7684 result \u5b57\u6bb5\n          formatBodyBeforeValidate: (data) => data.result,\n          // \u81ea\u5b9a\u4e49\u6821\u9a8c\u4fe1\u606f\u663e\u793a\u903b\u8f91\n          onValidate: (res) => {\n            const { code, result: { receive, send } = {}, message } = res;\n            if (code) {\n              // do something\n            }\n          }\n      )[0],\n      target: PROXY_TARGET,\n      changeOrigin: true\n    })\n  )\n};\n")),Object(s.b)("h2",{id:"32-\u9ed8\u8ba4-onvalidate"},"3.2 \u9ed8\u8ba4 onValidate"),Object(s.b)("p",null,"\u9ed8\u8ba4 onValidate \u4f1a\u6253\u51fa\u5982\u4e0b\u4fe1\u606f\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49 onValidate \u5bf9\u9519\u8bef\u8fdb\u884c\u5904\u7406"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"  \u63a5\u53e3 /mix/{id}/ \u53c2\u6570\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.body.id should be number\n  \u63a5\u53e3 /mix/{id}/ \u6570\u636e\u8fd4\u56de\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.code should be number\n  \u63a5\u53e3 /mix/{id}/ \u53c2\u6570\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.body.id should be number\n  \u63a5\u53e3 /mix/{id}/ \u6570\u636e\u8fd4\u56de\u4e0d\u7b26\u5408\u7ea6\u5b9a: data.code should be number\n")),Object(s.b)("h2",{id:"4-todo---\u9762\u5411-qa"},"4. todo - \u9762\u5411 QA"),Object(s.b)("p",null,"@todo"),Object(s.b)("p",null,"\u81ea\u52a8\u6d4b\u8bd5\u5e76\u6821\u9a8c"))}x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/validate/README.mdx"}}),x.isMDXComponent=!0}}]);
//# sourceMappingURL=src-validate-readme.b0426461f4f1f174bba6.js.map